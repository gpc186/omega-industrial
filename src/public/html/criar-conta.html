<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Petro - Cadastro</title>
    <link rel="stylesheet" href="../style/criar-conta.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.1.1/css/intlTelInput.css" />

</head>

<body>
    <header>
        <nav>
            <div class="nav-content">
                <div class="nav-img">
                    <img class="nav-img-logo" src="/src/public/assets/img/logo.png">
                </div>

                <div class="nav-navegacao">
                    <a href="produtos.html">
                        <p>Produtos</p>
                    </a>
                    <a href="">
                        <p>Dashboard</p>
                    </a>
                    <a href="">
                        <p>Carrinho</p>
                    </a>
                </div>
            </div>

            <div class="nav-content">
                <div class="nav-btn-container">
                    <a href="index.html"><button class="nav-btn-entrar">Voltar</button></a>
                </div>
            </div>
        </nav>
    </header>

    <div class="caixa">
        <div class="form-card">
            <h1 class="titulo">Dados de Acesso</h1>
            <p class="subtitulo">Preencha todos os campos obrigatórios para criar sua conta</p>

            <form id="form-cadastro">

                <div class="linha">
                    <div class="grupo-formulario">
                        <label>Empresa</label>
                        <input type="text" placeholder="Nome da empresa" required />
                    </div>

                    <div class="grupo-formulario">
                        <label>CNPJ</label>
                        <input type="text" id="cnpj" placeholder="00.000.000/0000-00" maxlength="18" required />
                    </div>
                </div>

                <div class="linha">
                    <div class="grupo-formulario">
                        <label>Email</label>
                        <input type="email" id="email" placeholder="seu@email.com" required />
                    </div>

                    <div class="grupo-formulario">
                        <label>Telefone</label>
                        <input id="telefone" type="tel" required />
                    </div>

                </div>

                <div class="linha">
                    <div class="grupo-formulario">
                        <label>Senha</label>
                        <div class="senha">
                            <input type="password" id="senha1" placeholder="Digite sua senha" required />
                            <button type="button" class="button-imagem" onclick="toggleSenha('senha1','eyeIcon1')">
                                <div class="eye-icon eye-closed" id="eyeIcon1">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle class="eye-pupil" cx="12" cy="12" r="3"></circle>
                                        <line class="eye-slash" x1="3" y1="3" x2="21" y2="21"></line>
                                    </svg>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="grupo-formulario">
                        <label>Confirmar Senha</label>
                        <div class="senha">
                            <input type="password" id="senha2" placeholder="Confirme sua senha" required />
                            <button type="button" class="button-imagem" onclick="toggleSenha('senha2','eyeIcon2')">
                                <div class="eye-icon eye-closed" id="eyeIcon2">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle class="eye-pupil" cx="12" cy="12" r="3"></circle>
                                        <line class="eye-slash" x1="3" y1="3" x2="21" y2="21"></line>
                                    </svg>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>

                <button type="submit" class="enviar-btn">ENVIAR</button>
            </form>

            <div class="divisao">ou</div>

            <div class="criar-conta">
                <p class="criar-conta-texto">Já possui conta?</p>
                <a href="login.html" class="criar-conta-link">LOGIN</a>
            </div>
        </div>
    </div>

    <!-- intl-tel-input -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.1.1/js/intlTelInput.min.js"></script>

    <!-- google libphonenumber (VERSÃO CERTA PARA MÁSCARAS) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/google-libphonenumber/3.2.31/libphonenumber.js"></script>

    <script>
        /* =====================================================
            1) MOSTRAR / ESCONDER SENHA
        ===================================================== */
        function toggleSenha(inputId, eyeId) {
            const input = document.getElementById(inputId);
            const eyeIcon = document.getElementById(eyeId);

            if (input.type === "password") {
                input.type = "text";
                eyeIcon.classList.replace("eye-closed", "eye-open");
            } else {
                input.type = "password";
                eyeIcon.classList.replace("eye-open", "eye-closed");
            }
        }

        /* =====================================================
            2) TELEFONE — MÁSCARA REAL (GOOGLE + INTL-TEL-INPUT)
        ===================================================== */
        const telefoneInput = document.getElementById("telefone");

        const iti = intlTelInput(telefoneInput, {
            initialCountry: "br",
            separateDialCode: true,
            nationalMode: true,
            autoInsertDialCode: true,
            autoPlaceholder: "aggressive",
            formatOnDisplay: true,
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/18.1.1/js/utils.js"
        });

        // Google library
        const phoneUtil = libphonenumber.PhoneNumberUtil.getInstance();
        const PNF = libphonenumber.PhoneNumberFormat;

        /* Bloquear letras e caracteres inválidos */
        telefoneInput.addEventListener("keydown", (e) => {
            const permitido = ["Backspace", "Delete", "ArrowLeft", "ArrowRight", "Home", "End", "Tab"];
            if (permitido.includes(e.key)) return;

            if (!/[0-9]/.test(e.key)) e.preventDefault();
        });

        /* Aplicar máscara automática */
        telefoneInput.addEventListener("input", () => {
            const country = iti.getSelectedCountryData().iso2.toUpperCase();
            let digits = telefoneInput.value.replace(/\D/g, "");

            try {
                const number = phoneUtil.parse(digits, country);
                const formatted = phoneUtil.format(number, PNF.NATIONAL);
                telefoneInput.value = formatted;

                telefoneInput.style.borderColor =
                    phoneUtil.isValidNumber(number) ? "#40ad62" : "#d9534f";

            } catch (error) {
                telefoneInput.style.borderColor = "#d9534f";
            }
        });

        /* =====================================================
            3) MÁSCARA CNPJ
        ===================================================== */
        document.getElementById("cnpj").addEventListener("input", (e) => {
            let v = e.target.value.replace(/\D/g, "");
            v = v.replace(/(\d{2})(\d)/, "$1.$2");
            v = v.replace(/(\d{2})\.(\d{3})(\d)/, "$1.$2.$3");
            v = v.replace(/(\d{2})\.(\d{3})\.(\d{3})(\d)/, "$1.$2.$3/$4");
            v = v.replace(/(\d{2})\.(\d{3})\.(\d{3})\/(\d{4})(\d)/, "$1.$2.$3/$4-$5");
            e.target.value = v;
        });

        /* =====================================================
            4) VALIDAÇÃO EMAIL
        ===================================================== */
        document.getElementById("email").addEventListener("input", (e) => {
            const valido = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.target.value);
            e.target.style.borderColor = valido ? "#40ad62" : "#d9534f";
        });
    </script>
''



</body>

</html>