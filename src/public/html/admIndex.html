<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petro - AdmIndex</title>
    <link rel="stylesheet" href="../style/admIndex.css">
</head>

<body>
     <!-- ====================== HEADER NOVO ======================= -->

    <header class="op-header">
        <nav class="op-nav">
            <div class="op-container">

                <a href="index.html" class="op-logo">
                    <img src="../assets/img/logo.png" alt="OmegaPetro Logo">
                </a>

                <div class="op-menu" id="navMenu">

                    <a href="/produtos">Produtos</a>
                    <a href="#" id="dashboardLink" style="display:none;">Dashboard</a>
                    <a href="/carrinho">Carrinho</a>

                    <div class="op-login nav-btn-container">
                        <a href="/login" id="loginLink">
                            <img src="../assets/img/login.png" alt="">
                        </a>
                    </div>

                </div>

                <button class="op-hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

            </div>
        </nav>
    </header>
    <!-- CONTEÚDO PRINCIPAL -->
    <main class="container">

        <!-- CARD 1 -->
        <div class="card">
            <div class="card-top">
                <img src="../assets/img/Finance-amico.svg" class="card-icon">
            </div>

            <h2>Relatório de Vendas</h2>
            <p class="sub">
                Acompanhe em tempo real o desempenho das vendas, métricas de estoque e análises detalhadas do negócio.
            </p>

            <a href="/adm/relatorio" class="btn azul">Acessar Dashboard →</a>
        </div>

        <!-- CARD 2 -->
        <div class="card">
            <div class="card-top">
                <img src="../assets/img/Site Stats-amico.svg" class="card-icon">
            </div>

            <h2>Gerenciar Produtos</h2>
            <p class="sub">
                Controle todo o catálogo de equipamentos industriais, atualize dados e acompanhe estoque.
            </p>

            <a href="/adm/produtos" class="btn laranja">Gerenciar Catálogo →</a>
        </div>

    </main>

   <!-- =================== HEADER JS ADM =================== -->
    <script>
          const token = localStorage.getItem('token');
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        const loginLink = document.getElementById('loginLink');
        const dashboardLink = document.getElementById('dashboardLink');
        const navLoginContainer = document.querySelector('.nav-btn-container');

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'index.html';
        }

        if (token && user.nome) {
            loginLink.style.display = "none";
            navLoginContainer.innerHTML = `<button class="nav-btn-entrar" onclick="logout()">Sair</button>`;
            if (user.role === "admin" || user.role === "adm") {
                dashboardLink.style.display = "block";
            }
        } else {
            dashboardLink.style.display = "none";
        }

            const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('navMenu');

        hamburger.addEventListener('click', (e) => {
            e.stopPropagation(); // ⚡ Impede que o clique se propague
            hamburger.classList.toggle('active');
            navMenu.classList.toggle('active');
        });

        // Fecha o menu quando clicar fora
        document.addEventListener('click', (e) => {
            if (!navMenu.contains(e.target) && !hamburger.contains(e.target)) {
                navMenu.classList.remove('active');
                hamburger.classList.remove('active');
            }
        });

        // Impede seleção de texto acidental
        document.body.style.userSelect = "none";
        navMenu.style.userSelect = "auto"; // Só permite selecio
    </script>


</body>

</html>
